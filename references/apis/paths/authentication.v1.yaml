tags:
  - name: Authentication
    description: Net2Phone API uses the industry-standard OAuth 2.0 for authorization. For a full review of authentication see [authentication](/authentication)
paths:
  /oauth/authorize/:
    get:
      summary: Authorization Code Grant
      description: |-
        The authorization code grant is used for server-side applications for which source code is not exposed and for which the confidentiality of the applications Client Id and Client Secret can be maintained. This is a redirection based flow and as such a redirection uri must be registered and provided when authenticating. When access is requested via this flow the user is directed to a login page where they must authenticate and grant access to the server-side application.

        For the full authentication flow see [authentication](/authentication#authorization-code-grant)
      parameters:
        - $ref: "#/components/parameters/response_type"
        - $ref: "#/components/parameters/redirect_uri"
        - $ref: "#/components/parameters/client_id"
        - $ref: "#/components/parameters/state"
      responses:
        200:
          headers:
            x-RateLimit-Limit:
              type: string
              description: 3/second, 60/minute
  /oauth/authorize/n2p:
    get:
      summary: Authorization Code Grant with SAML for Unite
      description: |-
        **Server-Side Application Authentication**

        The authorization code grant is used for server-side applications for which source code is not exposed and for which the confidentiality of the applications Client Id and Client Secret can be maintained. This is a redirection based flow and as such a redirection uri must be registered and provided when authenticating. When access is requested via this flow the user is directed to a login page where they must authenticate and grant access to the server-side application.

        **Before you begin you must obtain a Client Id and Secret:** [getting started](/documentation/getting-started).

        Once you have provided your redirect uri to us and have obtained your Client Id and Client Secret; direct the authenticating user to: `/api/oauth/authorize/n2p/` be sure to include the required arguments with your request (See below for arguments).
      parameters:
        - $ref: "#/components/parameters/client_id"
        - $ref: "#/components/parameters/state"
      responses:
        200:
          headers:
            x-RateLimit-Limit:
              type: string
              description: 3/second, 60/minute
  /oauth/logout:
    get:
      summary: Logout
      description: |-
        **Server-Side Application Authentication**

        Logout endpoint. It will revoke the token and clear the session.
      parameters:
        - $ref: "#/components/parameters/client_id"
        - $ref: "#/components/parameters/access_token"
      responses:
        200:
          headers:
            x-RateLimit-Limit:
              type: string
              description: 3/second, 20/minute
  /oauth/token/:
    post:
      summary: Access and Refresh Tokens
      description: |-
        Use the Authentication Code provided in the redirect along with your applications Client Id and Client Secret to obtain an Access and Refresh Token for the user.

        `client_secret` is required when using `grant_type = authorization_code`,  
        `refresh_token` is required when using `grant_type = refresh_token`
      parameters:
        - $ref: "#/components/parameters/grant_type"
        - $ref: "#/components/parameters/client_id"
        - $ref: "#/components/parameters/client_secret"
        - $ref: "#/components/parameters/refresh_token"
        - $ref: "#/components/parameters/state"
      responses:
        200:
          headers:
            x-RateLimit-Limit:
              type: string
              description: 3/second, 60/minute
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/auth_token"
              examples:
                example:
                  $ref: "#/components/examples/auth_token"
